---
description: Стандарты описания методов
globs: 
alwaysApply: false
---
# Правила оформления описаний методов для LLM

## Общие правила
- Описание метода должно быть в виде комментария перед объявлением метода
- Краткое описание назначения метода, особенности работы и огранчения
- Если метод простой и его назначение очевидно из названия и параметров - описание можно не писать
- Не писать комментарий, если он не добавляет полезной информации
- Между секциями комментария должна быть пустая строка для удобства чтения
- Описание размещается перед директивой компиляции, если она есть
- Ссылка на метод начинается с "см. ", например см. Фабрика.ОписаниеПараметра
- В описания параметров вместо типов "структура" стоит указать ссылки на методы конструкторы по возможности, для этого стоит анализировать кодовую базу решения
- После генерации описаний, проверь все ссылки на методы, существуют ли они
- Для экспортных методов в примере должно быть имя модуля
- Тип общего модуляя указывается в формате `CommonModule.<Имя модуля>`

## Примеры описаний методов

### Пример 1: Простая функция с одним параметром
```bsl
// Определяет доступность ролей текущему пользователю.
//
// Параметры:
//   ИменаРолей - Строка - имена ролей, доступность которых проверяется, разделенные запятыми.
//
// Возвращаемое значение:
//   Булево - Истина, если хотя бы одна из переданных ролей доступна текущему пользователю.
//
// Пример:
//   Если ПроверкаПрав.РолиДоступны("ИспользованиеРассылокОтчетов,ОтправкаПоПочте") Тогда ...
//
Функция РолиДоступны(ИменаРолей) Экспорт
```

### Пример 2: Процедура с несколькими параметрами
```bsl
// Заполняет форму исходящего письма по шаблону.
//
// Параметры:
//   ИсходящееПисьмо - СправочникСсылка.ИсходящееПисьмо - данные формы для типа СправочникСсылка.ИсходящееПисьмо,
//                     расположенные в форме редактора исходящего письма.
//   Текст - ФорматированныйДокумент - поле редактора текста письма, расположенное в форме
//          редактора исходящего письма.
//
Процедура ЗаполнитьПисьмоПоШаблону(ИсходящееПисьмо, Текст) Экспорт
```

### Пример 3: Функция с составным типом параметра
```bsl
// Сохраняет несколько настроек в хранилище общих настроек.
//
// Параметры:
//   НесколькоНастроек - Массив - со значениями:
//     + Значение - Структура - со свойствами:
//         * Объект    - Строка
//         * Настройка - Строка
//         * Значение  - Произвольный
//
//   ОбновитьПовторноИспользуемыеЗначения - Булево - выполнить одноименный метод платформы.
//
Процедура ХранилищеОбщихНастроекСохранитьМассив(НесколькоНастроек, ОбновитьПовторноИспользуемыеЗначения = Ложь)
```

### Пример 4: Устаревший метод
```bsl
// Устарела. Следует использовать ОбщегоНазначения.РазделениеВключено и
// ОбщегоНазначения.ДоступноИспользованиеРазделенныхДанных
//
Функция ИспользованиеРазделителяСеанса() Экспорт
```

### Пример 5: Метод с вариантами вызова
```bsl
// Проверяет возможность изменения данных объекта метаданных.
//
// Параметры:
//   ОбъектМетаданных - Строка - полное имя объекта метаданных.
//   Ссылка - СправочникСсылка - ссылка на элемент объекта метаданных.
//
// Варианты вызова:
//   ИзменениеЗапрещено(СправочникОбъект...) - проверить данные в переданном объекте.
//   ИзменениеЗапрещено(Строка, СправочникСсылка...) - проверить данные, полученные из базы данных.
//   ИзменениеЗапрещено(СправочникОбъект..., СправочникСсылка...) - проверить одновременно данные
//      в переданном объекте и данные в базе.
//
Функция ИзменениеЗапрещено(ОбъектМетаданных, Ссылка = Неопределено) Экспорт
```

### Пример 6: Переопределяемый метод
```bsl
// Вызывается перед загрузкой новых настроек. Используется для изменения схемы компоновки.
//
// Параметры:
//   Контекст - Произвольный - параметры контекста, в котором используется отчет.
//   КлючСхемы - Строка - идентификатор текущей схемы компоновщика настроек.
//   КлючВарианта - Строка, Неопределено - имя предопределенного или уникальный идентификатор
//                 пользовательского варианта отчета.
//
// Пример:
//   Если КлючСхемы <> "1" Тогда
//       КлючСхемы = "1";
//       СхемаКД = ПолучитьОбщийМакет("МояОбщаяСхемаКомпоновки");
//       ОтчетыСервер.ПодключитьСхему(ЭтотОбъект, Контекст, СхемаКД, КлючСхемы);
//   КонецЕсли;
//
Процедура ПередЗагрузкойНастроекВКомпоновщик(Контекст, КлючСхемы, КлючВарианта) Экспорт
```

### Пример 7: Использование ссылок на методы-конструкторы
```bsl
// Заполняет таблицу ценами в строке табличной части.
//
// Параметры:
//   ТекущаяСтрока - СтрокаТабличнойЧасти - строка табличной части документа.
//   ПараметрыЗаполненияЦен - см. ЦенообразованиеСервер.ПараметрыЗаполненияЦен
//
Процедура ЗаполнитьЦеныВСтрокеТЧ(ТекущаяСтрока, ПараметрыЗаполненияЦен)

// Возвращает структуру с параметрами заполнения цен.
//
// Возвращаемое значение:
//   Структура - см. ЦенообразованиеСервер.ПараметрыЗаполненияЦен
//
Функция ПараметрыЗаполненияЦен() Экспорт

// Заполняет таблицу значениями из запроса.
//
// Параметры:
//   Запросы - см. Обработка.КонсольЗапросов.ТабличнаяЧасть.Запросы
//   ТипыДанных - см. Обработка.КонсольЗапросов.Реквизит.ДоступныеТипыДанных
//   Вложения - см. Справочник.ШаблоныСообщений.ФормаЭлемента.Вложения
//   КонтактнаяИнформация - см. Документ.ЗаказПокупателя.ФормаДокумента.Объект.КонтактнаяИнформация
//
Процедура ЗаполнитьТаблицуИзЗапроса(Запросы, ТипыДанных, Вложения, КонтактнаяИнформация)

// Возвращает структуру с параметрами обновления.
//
// Возвращаемое значение:
//   Массив из см. ОбновлениеИнформационнойБазы.ПараметрыОбновления
//
Функция ПолучитьПараметрыОбновления() Экспорт

// Возвращает таблицу значений с классификатором субъектов РФ.
//
// Возвращаемое значение:
//   СтрокаТаблицыЗначений: см. РегистрыСведений.АдресныеОбъекты.КлассификаторСубъектовРФ
//
Функция ПолучитьКлассификаторСубъектовРФ() Экспорт
```

### Пример 8: Описания сложных объектов, таблицы значений
```
// Возвращает доступные к обработке шаблоны URL.
// Для добавления шаблонов в коллекцию используется метод см. РатШаблоныАдресов.ДобавитьШаблон
//
// Возвращаемое значение:
//  ТаблицаЗначений - Коллекция шаблонов адресов сервиса:
//    * Метод       - Строка - HTTP метод (GET, POST, PUT и т.д.)
//    * Шаблон      - Строка - Шаблон относительного URL. Может содержать
//                             + статические части (например, "РегламентныеЗадания")
//                             + динамические части в формате {ИмяПеременной}
//    * Обработчик  - Строка - Идентификатор обработчика запроса
//    * Приоритет   - Число - Приоритет шаблона при поиске (по умолчанию 99).
//                            Чем меньше значение, тем выше приоритет
//    * Блоки       - Массив из Строка - Разбитый на части шаблон
//    * Ограничения - Структура - Ограничения для динамических частей шаблона
// 
// Пример:
//  Шаблоны = РатШаблоны.Шаблоны();
//  // Результат: Таблица со всеми зарегистрированными шаблонами
Функция Шаблоны() Экспорт
```

## Структура описания

### 1. Секция "Описание"
- Начинается с глагола ("Проверяет", "Создает", "Заполняет" и т.п.)
- Не должно совпадать с именем метода
- Не использовать избыточные слова "Процедура", "Функция" или имя самого метода
- Может содержать несколько строк с дополнительной информацией
- Для устаревших методов первая строка должна содержать слово "Устарела"
- Доступно использование многострочного описания, в первой строке краткое описание - заголовок, со следующей строки детали.

### 2. Секция "Параметры"
- Начинается с "Параметры:"
- Каждый параметр описывается в формате:
  ```
  ИмяПараметра - Тип - ТекстовоеОписание
  ```
- Для параметров типа Массив указывать тип элементов через "из":
  ```
  ИмяПараметра - Массив из Тип - Описание
  ```
- Для параметров типа Структура/ТаблицаЗначений указывать ссылку на функцию-конструктор:
  ```
  ИмяПараметра - см. ПутьКФункции
  ```
- Можно указывать несколько типов для одного параметра, каждый с новой строки
- Если в описании параметра необходимо вывести маркированный список используется маркер "+"

### 3. Секция "Возвращаемое значение" (только для функций)
- Начинается с "Возвращаемое значение:"
- Указывает тип и описание возвращаемого значения
- Для составных типов каждый тип пишется с новой строки с дефиса

### 4. Секция "Пример"
- Начинается с "Пример:"
- Содержит пример использования метода
- Должно быть понятно, что передается на входе и что возвращается
- Для экспортных методов в примере должно быть имя модуля
- Для переопределяемых методов содержит пример реализации

### 5. Секция "Варианты вызова" (опционально)
- Начинается с "Варианты вызова:"
- Используется когда метод имеет несколько вариантов вызова с разными типами параметров
- Каждый вариант описывается в формате:
  ```
  ИмяМетода(Тип1, Тип2) - описание варианта
  ```

## Форматирование
1. Длина строки не должна превышать 120 символов
2. Использовать отступы для улучшения читаемости
3. Добавлять пустые строки между секциями
4. Использовать маркированные списки для перечислений

## Специальные случаи
1. Для устаревших методов указывать альтернативные методы
2. Для переопределяемых методов приводить пример реализации
3. Для методов с множеством параметров использовать секцию "Варианты вызова"
4. Для методов с составными типами данных использовать ссылки на функции-конструкторы