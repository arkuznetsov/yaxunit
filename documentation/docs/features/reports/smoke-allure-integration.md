---
sidebar_position: 3
tags: [Smoke тесты, Allure, Отчеты, Интеграция]
---

# Интеграция smoke тестов с Allure отчетами

YAxUnit обеспечивает полную интеграцию smoke тестов с системой формирования Allure отчетов, позволяя получать детальную информацию о каждом smoke тесте.

## Особенности интеграции

### Автоматическое определение smoke тестов

Система автоматически определяет smoke тесты по имени модуля. Модули, начинающиеся с префикса "ДТ" (например, `ДТОткрытиеФорм`), автоматически обрабатываются как smoke тесты.

### Индивидуальное отображение тестов

В отличие от группового отображения, где все smoke тесты показывались как один тест, теперь каждый smoke тест отображается индивидуально:

- **До исправления**: В отчете отображалось 2 групповых теста
- **После исправления**: В отчете отображается каждый из 1754 индивидуальных smoke тестов

### Сохранение структуры группировки

При этом сохраняется правильная группировка по:
- Типам приложений
- Коллекциям метаданных
- Тестовым наборам

## Техническая реализация

### Функция определения smoke тестов

```bsl
Функция ЭтоSmokeТест(Модуль)
    ИмяМодуля = Модуль.Метаданные.Имя;
    Возврат СтрНачинаетсяС(ИмяМодуля, "ДТ");
КонецФункции
```

### Логика формирования отчета

Для smoke тестов используется специальная логика формирования:

```bsl
// Для smoke тестов используем представление теста вместо имени метода
Если ЭтоSmokeТест(Модуль) Тогда
    Описание.name = РезультатТеста.Представление;
    Описание.fullName = РезультатТеста.Представление + ПредставлениеРежима;
Иначе
    Описание.name = РезультатТеста.Имя;
    Описание.fullName = ПолноеИмяМетода + ПредставлениеРежима;
КонецЕсли;
```

## Примеры использования

### Запуск smoke тестов с Allure отчетом

```json
{
    "filter": {
        "extensions": ["smoke"]
    },
    "showReport": true,
    "reports": ["allure"],
    "ДымовыеТесты": {
        "Использовать": true,
        "ОткрытиеФорм": true
    }
}
```

### Результат в Allure отчете

После выполнения smoke тестов в Allure отчете вы увидите:

1. **Индивидуальные тесты**: Каждый smoke тест отображается отдельно
2. **Корректные названия**: Используются понятные названия тестов
3. **Правильная группировка**: Сохраняется структура по приложениям
4. **Детальная информация**: Доступны результаты каждого теста

## Преимущества

### Для разработчиков

- Возможность анализа каждого smoke теста отдельно
- Быстрое выявление проблемных тестов
- Детальная статистика выполнения

### Для CI/CD

- Интеграция с системами непрерывной интеграции
- Возможность настройки уведомлений по результатам
- История выполнения тестов

### Для аналитики

- Статистика по типам приложений
- Анализ производительности тестов
- Отслеживание трендов качества

## Ограничения

1. **Префикс модуля**: Smoke тесты должны иметь модули с префиксом "ДТ"
2. **Поле Представление**: Тесты должны содержать корректное поле `Представление`
3. **Совместимость**: Изменения не влияют на работу обычных unit тестов

## Миграция

Если у вас есть существующие smoke тесты, они автоматически получат поддержку Allure отчетов без дополнительных изменений. Система автоматически определит их по префиксу модуля и применит соответствующую логику формирования отчета.

## Поддержка

При возникновении проблем с отображением smoke тестов в Allure отчетах:

1. Убедитесь, что модуль начинается с префикса "ДТ"
2. Проверьте наличие поля `Представление` в тестовых данных
3. Запустите тесты с параметром `reports: ["allure"]`
4. Проверьте сгенерированный Allure отчет
